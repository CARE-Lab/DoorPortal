# Door

# 概要
どこで◯ドアシステムの動かし方です．

# 動作環境
- Varjo Base 3.7.1.11
- Unity 2021.3.6.f1
- SteamVR 1.24.6

# 簡易版動作方法
1. VIVE Tracker（ドアの左上に取り付ける） と VarjoBase起動（これでXR-3，SteamVRは自動で起動する）
1. Unityのプロジェクトを立ち上げて Assets/!Scenes/Demo を再生．（XR-3のカメラでドアのARマーカを捉えるように気をつける．）

# スクリプトと設定
- Marker.cs

物理ドアと3Dモデルの位置合わせを行っているスクリプトです．（XRRigにアタッチしています）

位置合わせとしては，71-81行目辺りでゴリ押しで行っています．ズレていた場合ここの数字を調整してください．

- ChangeLayer.cs

ステンシルバッファを使うため，オブジェクトごとにレイヤーを分けています．そのレイヤーの切り替えを行うスクリプトです．（XRRigの孫オブジェクトのMainCameraにアタッチしています）

カメラに当たり判定を付けてポータルに当たるとレイヤーを切り替えるようにしています．

- GetRot.cs

トラッカの回転角度を取得してドアに反映するためのスクリプトです．

基本的にはイジらないでいいです．
